<template>
<v-container fluid>
<li v-for="post in posts" :key="post.id">
  <p> {{ post.id }} </p> 
  {{ post.date }} {{ post.title.rendered } {{ post.link }} </p>
</v-container>
</template>

<script>
  export default {
    //fetchは取得したデータをstoreに保存する時に使う
    async fetch() {
      const res = await $axios.$get('http://13.231.178.0/wp-json/wp/v2/posts')
      .catch((err) => {
        console.error(err)
      });
      //storeにデータ保存してどこからでも扱えるようにする
      await this.$nuxt.context.store.commit('saveAllPosts', res);
    },
    //asyncDataは返却地がそのコンポーネントのdataにマージされる。
    async asyncData({ params, error, payload, store, $axios }) {
      const res = await $axios.$get('http://13.231.178.0/wp-json/wp/v2/posts')
      .catch((err) => {
        console.error(err)
      });
      //this.postsでアクセス可能になる
      return {
        posts : res
      }
    }
  }
</script>
